<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Players - FunXLink Studio Phira Server</title>
    <link rel="icon" href="logo.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <script src="i18n.js"></script>
</head>
<body>
    <script>(function(){
        const t=localStorage.getItem('theme');if(t==='dark')document.body.classList.add('dark-mode');
        I18n.init();
    })()</script>
    <div class="container">
        <header>
            <h1 data-i18n="players.title">Online Players</h1>
            <div id="total-players"></div>
            <div class="connection-status" id="connection-status">Connecting...</div>
        </header>
        <main>
            <div id="all-players-list" data-i18n="common.loading">
                Loading players...
            </div>
        </main>
        <footer>
            <p data-i18n="common.server_ip">Game Server IP:</p>
            <div class="server-ip-container" id="copy-ip" data-i18n-title="common.click_to_copy">
                <code id="server-ip">...</code>
                <span class="copy-icon">&#128203;</span>
            </div>
                <script>
                    // Update server IP and title from config if available
                    if (window.SERVER_CONFIG) {
                        if (window.SERVER_CONFIG.displayIp) {
                            document.getElementById('server-ip').textContent = window.SERVER_CONFIG.displayIp;
                        }
                        if (window.SERVER_CONFIG.serverName) {
                            document.title = `All Players - ${window.SERVER_CONFIG.serverName}`;
                        }
                    }
                </script>            <div class="footer-controls">
                <button id="theme-toggle" class="theme-toggle-btn">
                    <span id="theme-icon" class="theme-icon">üåô</span>
                    <span id="theme-text" data-i18n="common.dark_mode">Dark Mode</span>
                </button>
                <button id="lang-toggle" class="lang-toggle-btn" onclick="I18n.toggleLanguage()">
                    <span>üåê</span>
                    <span id="lang-toggle-text">English</span>
                </button>
            </div>
        </footer>
    </div>
    <script src="players.js"></script>
    <script>
        // Theme Toggle Logic
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themeText = document.getElementById('theme-text');
        const body = document.body;

        function updateThemeUI(isDark) {
            if (!I18n.isReady) return;
            themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            themeText.textContent = isDark ? I18n.t('common.light_mode') : I18n.t('common.dark_mode');
        }

        document.addEventListener('i18nReady', () => {
            updateThemeUI(body.classList.contains('dark-mode'));
        });

        themeToggle.addEventListener('click', () => {
            const isDark = body.classList.toggle('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateThemeUI(isDark);
        });

        document.getElementById('copy-ip').addEventListener('click', () => {
            const ip = document.getElementById('server-ip').textContent;
            navigator.clipboard.writeText(ip).then(() => {
                alert('ÊúçÂä°Âô® IP Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ');
            }).catch(err => {
                console.error('Â§çÂà∂Â§±Ë¥•: ', err);
            });
        });
    </script>
</body>
</html>
